# 实验简单记录

## 实验环境

本次实验使用的操作系统为Ubuntu22.04 LTS，编译器为gcc 11.3.0，编程所用语言语言为C语言。

## 实验目的

使用多线程技术对矩阵乘法进行优化

## 实验内容

本实验设置多个子实验，子实验的相同内容均为计算矩阵乘法 $C = A \times B$ 。另外为探究多线程的工作方法，子实验内容分别设置如下（后续可能有改动）：

（1）mm0.c：将 矩阵 $A_{_{(m\times n)}}$ 按行平分为两个矩阵 $A_{1_{(\frac{m}{2}\times n)}}$ 和  $A_{2_{(\frac{m}{2}\times n)}}$，使用两个线程分别计算其与矩阵 $B$ 的乘积，将计算结果整合为最终结果 矩阵 $C$ 。（目前是暂且使用两个线程并行，也可以修改为更多进程）

（2）mm1.c：同（1），不过使用了GEMM

（3）mm2.c：将 矩阵 $A_{_{(m\times n)}}$ 按列和行平分为四个矩阵 $A_{1_{(\frac{m}{2}\times n)}}$ 、 $A_{2_{(\frac{m}{2}\times n)}}$ 、 $A_{3_{(\frac{m}{2}\times n)}}$ 和  $A_{4_{(\frac{m}{2}\times n)}}$ ，使用四个线程分别计算其与矩阵 $B$ 的乘积，将计算结果整合为最终结果 矩阵 $C$ 。此时会发生race condition，对比加锁前后的结果。

（4）信号量没想好


## 实验结果及分析

计算结果均正确，但是优化效果由于测试数据太小，无法体现优化(测试其运行时间均为0.001s)，需要更换一个更大的数据集，用python写了生成，也已经修改了读取，接下来根据需要测试和分析结果。