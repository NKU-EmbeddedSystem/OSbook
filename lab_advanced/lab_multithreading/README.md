# 实验简单记录

## 实验环境

本次实验使用的操作系统为Ubuntu22.04 LTS，编译器为gcc 11.3.0，编程所用语言语言为C语言。

## 实验目的

使用多线程技术对矩阵乘法进行优化，并通过解决race condition来介绍有关锁的相关知识。

## 实验内容

本实验设置多个子实验，子实验的相同内容均为计算矩阵乘法 $C = A \times B$ 。另外为探究多线程的工作方法，子实验内容分别设置如下（后续可能有改动）：

（0）lab10_00.c：单线程矩阵乘法

（1）lab10_01.c：将 矩阵  $A_{(m\times n)}$  按行平分为两个矩阵   $A_{1_{(\frac{m}{2}\times n)}}$  和  $A_{2_{(\frac{m}{2}\times n)}}$ ，使用两个线程分别计算其与矩阵 $B$ 的乘积，将计算结果整合为最终结果 矩阵 $C$ 。

（2）lab10_02.c：改写了创建线程的部分，使得能够自由改变线程数量，自动创建线程。
     分为多种矩阵规模    lab02_500.c lab02_1000.c lab02_2000.c lab02_3000.c
                       
（3）lab10_03.c：将 矩阵  $A_{(m\times n)}$  按列和行平分为四个矩阵   $A_{1_{(\frac{m}{2}\times n)}}$ 、 $A_{2_{(\frac{m}{2}\times n)}}$ 、 $A_{3_{(\frac{m}{2}\times n)}}$ 和  $A_{4_{(\frac{m}{2}\times n)}}$ ，使用四个线程分别计算其与矩阵 $B$ 的乘积，将计算结果整合为最终结果 矩阵 $C$ 。此时会发生race condition，对比加锁前后的结果。

（4）lab10_04.c：同lab10_03，不过使用了信号量来解决race condition。

（5）lab10_05_01.c：用openmp实现多线程优化。

（6）lab10_05_02.c：用openmp解决数据冲突（reduction）。

（7）lab10_05_03.c：用openmp实现多线程优化(critical)。

（8）lab10_test.c：pthread实现多线程的简单示例

## 其他文件

（0）dataset：测试用数据

（1）results：多线程测试结果

（2）result_process.py：结果处理

（3) draw.py：结果图绘制
