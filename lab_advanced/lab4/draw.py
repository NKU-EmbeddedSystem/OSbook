import matplotlib.pyplot as plt
import numpy as np
import os

# 横轴数据
# x_data = [1,2,4,8,12,24,36,48,60,72,84,96,108,120,132,150]
x_data = range(1,151)
# 纵轴数据
y0_data1 =[0.693651, 0.34742565625, 0.23266, 0.175009671875, 0.141791328125, 0.122602335938, 0.105366335938, 0.094305, 0.086021335938, 0.074515664062, 0.070952664062, 0.071081335938, 0.066673664062, 0.062593332031, 0.056647, 0.049402, 0.049979667969000004, 0.061005, 0.047263, 0.041615667969, 0.059675332031, 0.055872332031, 0.058081332031, 0.062391667969, 0.035451, 0.038189332031, 0.047717, 0.06315833203099999, 0.037460332031, 0.057633667969000005, 0.034140332031, 0.049921667969, 0.033263332031, 0.058074667969, 0.037949667969000005, 0.068302664062, 0.051273667969, 0.0342, 0.069506664062, 0.051874332030999996, 0.036213667969, 0.076173, 0.061201667969, 0.046750667969, 0.027264, 0.075642335938, 0.064193667969, 0.047338, 0.046066, 0.03238, 0.08727466406199999, 0.077292664062, 0.066653, 0.049905667969, 0.037903, 0.101378664062, 0.092500664062, 0.080305, 0.070604335938, 0.058129332031, 0.044426, 0.033665332031, 0.109375335938, 0.09818633593800001, 0.090471, 0.081058335938, 0.067063664062, 0.061759667969, 0.051746332031, 0.039964, 0.028218666016, 0.11816633593800001, 0.109970664062, 0.10353766406199999, 0.094262335938, 0.086521664062, 0.078588335938, 0.07081966406199999, 0.059195332031, 0.052663, 0.042808332031, 0.031304, 0.02317, 0.132115328125, 0.126073335938, 0.11860933593800001, 0.112846664062, 0.10675666406199999, 0.097153335938, 0.09124733593800001, 0.085659664062, 0.076887335938, 0.07218133593800001, 0.064243667969, 0.057288, 0.048576, 0.039930667969, 0.032401, 0.027792666016, 0.023094, 0.154937, 0.152112, 0.145473328125, 0.140469328125, 0.135497671875, 0.129591, 0.124126, 0.118404664062, 0.113371, 0.107603, 0.102409664062, 0.09818, 0.090568, 0.08570866406199999, 0.08003333593800001, 0.07451133593800001, 0.068482664062, 0.063261, 0.058286667969, 0.050125332030999996, 0.043918332031, 0.037106, 0.030201666016, 0.026811, 0.020242333984, 0.188081671875, 0.185436, 0.181171671875, 0.177415671875, 0.173525328125, 0.169095328125, 0.166662671875, 0.161244671875, 0.158404671875, 0.153217, 0.148725328125, 0.147109, 0.142624, 0.136300671875, 0.131302, 0.127760335938, 0.12471733593800001, 0.120502, 0.116655664062, 0.112653, 0.107996664062, 0.105251664062, 0.102494664062, 0.098052664062, 0.090659335938]
y0_data2 = [4.01475025, 2.003094625, 1.353453375, 1.055393375, 0.9139623125, 0.711494, 0.684899, 0.6072503125, 0.6107716875, 0.5704276875, 0.5366983125, 0.5343093125, 0.5392356875, 0.45954434375, 0.44850665625, 0.42992434375, 0.441951, 0.337615, 0.31945734375, 0.30587234375, 0.31544965625, 0.29787, 0.307893, 0.34571534375, 0.33085434375, 0.33289565625, 0.38415565625, 0.38578134375, 0.33099065625, 0.33978665625, 0.32024134375, 0.31905, 0.33764934375, 0.32155165625, 0.41164334375, 0.408344, 0.323368, 0.29788065625, 0.33594434375, 0.29764365625, 0.35858665625, 0.38151165625, 0.35119634375, 0.44787865625, 0.27162234375, 0.38499034375, 0.33778634375, 0.36066865625, 0.28456965625, 0.245666671875, 0.314895, 0.238470671875, 0.40141665625, 0.29391265625, 0.226870328125, 0.44618365625, 0.33392965625, 0.301532, 0.48724165625, 0.41078234375, 0.27505865625, 0.198935, 0.477933, 0.33729034375, 0.29334165625, 0.197899671875, 0.42776734375, 0.41075034375, 0.27991265625, 0.253667328125, 0.189906, 0.5288283125, 0.34179134375, 0.377462, 0.279635, 0.211237, 0.6044023125, 0.473848, 0.37261865625, 0.40262965625, 0.28264365625, 0.201515328125, 0.183208, 0.46688134375, 0.43629465625, 0.42074365625, 0.38998365625, 0.356934, 0.27925234375, 0.190502328125, 0.47039134375, 0.5764603125, 0.44169865625, 0.450124, 0.40198765625, 0.35374965625, 0.324349, 0.233375671875, 0.197739, 0.177689671875, 0.6298993125, 0.5593753125, 0.5825816875, 0.406734, 0.381618, 0.374127, 0.338612, 0.309764, 0.241502328125, 0.191512328125, 0.170466328125, 0.7672456875, 0.7026093125, 0.5504563125, 0.49657834375, 0.567382, 0.51785134375, 0.37886565625, 0.39038834375, 0.317895, 0.322882, 0.288252, 0.232315, 0.180553328125, 0.159809328125, 0.5724696875, 0.7281056875, 0.6752516875, 0.651311, 0.609888, 0.56174, 0.46187234375, 0.5316293125, 0.44990865625, 0.42982865625, 0.39970534375, 0.34738934375, 0.27513465625, 0.293295, 0.231312328125, 0.184398671875, 0.158631671875, 0.847319, 0.931186, 0.8878113125, 0.7635866875, 0.8183786875, 0.7738143125, 0.729573, 0.69044]
y0_data3 = [131.333976, 68.423328, 46.691856, 35.79952, 28.606472, 24.291318, 21.317748, 18.642784, 16.203811, 14.784715, 13.367677, 12.408213, 11.506519, 10.603783, 9.985349, 9.531429, 8.986333, 8.86272, 8.721105, 7.9269665, 8.3507025, 7.5710945, 7.6604385, 6.995376, 6.80322, 6.9095895, 6.892176, 7.0994805, 7.3410215, 6.6032615, 7.5771925, 8.0992225, 8.1853905, 7.161888, 7.4517445, 7.2613665, 6.8678215, 8.008948, 8.06111, 6.6261545, 6.9701785, 6.7312375, 6.5725135, 6.5119735, 7.38186, 6.1147975, 6.6965345, 6.467776, 6.3635795, 6.1960585, 5.9189775, 5.937456, 5.8613565, 5.8659115, 5.8030305, 5.7373905, 5.3847145, 6.4421895, 6.6453145, 5.192758, 5.2401405, 5.37542, 5.674428, 5.593656, 4.9229615, 4.9366755, 6.480216, 4.7122195, 5.6861425, 7.2967715, 4.831922, 5.6537355, 4.379263, 5.426794, 4.300408, 4.88863, 6.0501475, 4.741014, 6.6786545, 5.049783, 4.09092575, 5.472805, 4.227661, 6.5038825, 4.862268, 7.0679185, 5.1591305, 3.72607075, 6.4457565, 4.292352, 7.116266, 6.1367855, 4.6649785, 7.4515045, 6.0635825, 4.7101885, 7.6215295, 6.3647055, 4.755501, 3.87014425, 6.6558525, 5.266851, 3.92826775, 7.5868145, 6.0171605, 4.6242935, 3.930777, 7.4562025, 6.2843145, 4.9823925, 3.95645175, 7.01809, 6.1027575, 5.1447595, 4.06084975, 7.6743975, 6.342336, 5.8367135, 4.14408875, 3.87197175, 7.3188385, 6.3756625, 5.2402465, 4.18671175, 3.76964925, 7.8467545, 6.7069585, 5.5047735, 4.7141475, 3.884244, 8.853463, 7.7753425, 6.283134, 5.8400415, 4.282452, 3.805553, 8.959037, 7.9202015, 6.7649225, 5.98275, 4.778354, 4.051589, 9.669161, 8.759908, 7.656906, 6.960776, 5.796884, 4.91083, 3.80300225, 3.68069]

# y_data1 = []
# y_data2 = []
# y_data3 = []

y_data1 = y0_data1 
y_data2 = y0_data2 
y_data3 = y0_data3

# for i in x_data:
#     y_data1.append(y0_data1[0]/y0_data1[i-1])
#     y_data2.append(y0_data2[0]/y0_data2[i-1])
#     print(y0_data2[0]/y0_data2[i-1])
#     y_data3.append(y0_data3[0]/y0_data3[i-1])

# print(min(y_data1),y_data1.index(min(y_data1)),x_data[y_data1.index(min(y_data1))],y0_data1[107])
# print(min(y_data2),y_data2.index(min(y_data2)),x_data[y_data2.index(min(y_data2))],y0_data2[107])
# print(min(y_data3),y_data3.index(min(y_data3)))

plt.plot(x_data, y_data1, c="red", label="500")
plt.plot(x_data, y_data2, c="blue", label="1000")
# plt.plot(x_data, y_data3, c="green", label="3000")
plt.scatter(x_data, y_data1, c="red")
plt.scatter(x_data, y_data2, c="blue")
# plt.scatter(x_data, y_data3, c="green")
plt.grid(True, linestyle='--', alpha=0.5)
plt.xlabel("thread number")
plt.ylabel("speedup ratio")
plt.legend(loc='best')
plt.show()

try:
    plt.savefig("./result_img/result_temp.png")
except:
    os.mkdir("./result_img")
    plt.savefig("./result_img/result_temp.png")
